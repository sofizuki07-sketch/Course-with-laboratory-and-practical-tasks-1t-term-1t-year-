# Лабораторная работа №2
## Тема: Ссылки, владение, типажи и обобщения в Rust

### Задача 1: Система учёта товаров в магазине с типажами
Создайте программу для управления товарами в магазине, используя следующие элементы:
- Структуру `Product` с полями: `id` (u32), `name` (String), `price` (f64), `quantity` (u32)
- Типаж `Displayable` с методом `display(&self)`, который должен возвращать форматированную строку с информацией
- Реализуйте типаж `Displayable` для структуры `Product` так, чтобы метод выводил информацию в формате: "ID: {id}, Название: {name}, Цена: {price} руб., Количество: {quantity}"
- Создайте обобщённую структуру `Inventory<T>` для хранения коллекции товаров (вектор элементов типа T)
- Реализуйте для `Inventory<T>` методы: `add_item(&mut self, item: T)`, `remove_item(&mut self, id: u32) -> Option<T>`, `display_all(&self)`, где T должен реализовывать типаж `Displayable`
- В функции `main` создайте инвентарь, добавьте несколько товаров, продемонстрируйте добавление, удаление и вывод всех товаров

### Задача 2: Калькулятор статистики с обобщёнными функциями
Разработайте программу-калькулятор, которая работает с различными числовыми типами:
- Создайте типаж `Statistic` с методами: `average(&self) -> f64`, `min(&self) -> T`, `max(&self) -> T`, `sum(&self) -> T`
- Реализуйте типаж `Statistic` для массивов (`[T; N]`) и векторов (`Vec<T>`), где T должен поддерживать операции сравнения и сложения
- Напишите обобщённую функцию `calculate_statistics<T>(data: &[T])`, которая принимает срез данных и возвращает структуру `StatsResult<T>` с полями: среднее, минимум, максимум, сумма
- Создайте структуру `StatsResult<T>` с соответствующими полями
- Реализуйте типаж `std::fmt::Display` для `StatsResult<T>`, чтобы красиво выводить результаты
- В функции `main` протестируйте работу с целыми числами (`i32`) и числами с плавающей точкой (`f64`), демонстрируя правильность вычислений

---

## Теоретическая справка по теме «Ссылки, владение, типажи и обобщения»

### 1. Основные новые понятия темы:

- **Владение (Ownership)** – система Rust, где каждая переменная имеет единственного владельца, отвечающего за освобождение памяти
- **Заимствование (Borrowing)** – механизм получения временного доступа к данным через ссылки (`&` – неизменяемая, `&mut` – изменяемая)
- **Типажи (Traits)** – интерфейсы, определяющие общее поведение для разных типов (аналоги интерфейсов в других языках)
- **Обобщения (Generics)** – абстрактные типы-заполнители, позволяющие писать код, работающий с разными конкретными типами
- **Время жизни (Lifetimes)** – аннотации (`'a`), указывающие компилятору, как долго ссылки остаются валидными

### 2. Ключевые изученные элементы языка Rust:

- Работа с изменяемыми и неизменяемыми ссылками (`&` и `&mut`)
- Определение и реализация типажей с помощью ключевого слова `trait`
- Создание обобщённых функций, структур и методов с параметрами типа `<T>`
- Использование ограничений типажей (`where T: Trait`) для указания требований к обобщённым типам
- Реализация стандартных типажей: `Clone`, `Copy`, `Display`, `Debug`

### Ключевые моменты для запоминания:

- Правила заимствования: множество неизменяемых ссылок ИЛИ одна изменяемая ссылка одновременно
- Типажи определяют поведение, но не данные
- Обобщения позволяют избежать дублирования кода для разных типов
- Время жизни помогает предотвратить висячие ссылки
- Компилятор Rust строго проверяет все правила владения и заимствования

### Практические советы:

- Начинайте с неизменяемых ссылок, переходите к изменяемым только при необходимости
- Используйте `derive` для автоматической реализации распространённых типажей: `#[derive(Clone, Copy, Debug)]`
- Для сложных ограничений типажей используйте конструкцию `where`
- Изучайте сообщения компилятора о времени жизни – они помогут исправить ошибки
- Тестируйте код с разными типами данных для проверки корректности обобщённых реализаций
